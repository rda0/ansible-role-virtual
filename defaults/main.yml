include_virtual_bootstrap: True

# Minimal required variables to be set in the inventory
# -----------------------------------------------------

# Required variables for hypervisor selection

#virtual_hypervisor_host: hostname
#virtual_hypervisor_type: kvm

# Required variables for the guest

#virtual_distribution: debian, ubuntu, kali, ...
#virtual_codename: buster, stretch, bionic, kali-rolling, ...
#virtual_mac: 52:54:00:xx:xx:xx

# Default values (may be overridden in the inventory)
# ---------------------------------------------------

virtual_guest_name: '{{ inventory_hostname }}'
virtual_bootstrap_method: create
virtual_boot_method: fs-boot
virtual_template_vg: vg0
virtual_template_name: vm-tpl
virtual_template_path: /var/opt/img
virtual_template_type: file
virtual_cpus: 1
virtual_cpus_max: '{{ virtual_cpus }}'
virtual_cpus_hotpluggable: '{{ True if virtual_cpus_max > virtual_cpus else False }}'
virtual_memory: 1024
virtual_memory_max: '{{ virtual_memory }}'
virtual_memory_hotpluggable: '{{ True if virtual_memory_max > virtual_memory else False }}'
virtual_memory_slots: 16
virtual_memory_balloon: False
virtual_memory_hugepages: True
virtual_memory_hugepages_size: 2048
virtual_memory_hugepages_unit: KiB
virtual_numa_cell_cpus: '0-{{ virtual_cpus_max-1 | int | abs }}'
virtual_numa_cell_memory: '{{ virtual_memory*1024 | int | abs }}'
virtual_disk_size: 2G
virtual_disk_vg: vg0
virtual_disk_fs: ext4
virtual_disk_letters: 'abcdefghijklmnopqrstuvwxyz'
virtual_disks: []
virtual_disks_letters: "{{ virtual_disk_letters[2:] if virtual_boot_method == 'part-boot' else virtual_disk_letters[1:] }}"
virtual_bridge: br0
virtual_interface_suffix: ''
virtual_interface_replace_regex: '^phd-(test-)?'
virtual_interface_name: "{{ virtual_guest_name | regex_replace(virtual_interface_replace_regex, '') }}{{ virtual_interface_suffix }}"
virtual_mount_base_path: /mnt/ansible/virtual
virtual_kernel_base_path: /var/opt/kernel
virtual_kernel_disk: root
virtual_kernel_disk_path: '/dev/{{ virtual_disk_vg }}/{{ virtual_guest_name }}-{{ virtual_kernel_disk }}'
virtual_kernel_args_common: 'net.ifnames=0 biosdevname=0 nousb console=tty0 console=ttyS0,115200n8 elevator=noop'
virtual_kernel_args_root: '/dev/sda'
virtual_kernel_args: 'root={{ virtual_kernel_args_root }} ro {{ virtual_kernel_args_common }}'
virtual_install_kernel_args: 'auto=true priority=critical {{ virtual_kernel_args_common }}'
